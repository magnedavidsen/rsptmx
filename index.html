<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:url"                content="http://rsptmx.no" />
  <meta property="og:title"              content="RSP & Thomax" />
  <meta property="og:description"        content="Malabarisk" />
  <meta property="og:image"              content="https://rsptmx.no/meta.jpg" />

  <link rel="manifest" href="site.webmanifest">
  <link rel="apple-touch-icon" href="icon.png">
  <!-- Place favicon.ico in the root directory -->

  <link rel="stylesheet" href="reset.css">
  <link rel="stylesheet" href="style.css">

  <meta name="theme-color" content="#fafafa">
  <script async defer data-domain="rsptmx.no" src="https://plausible.io/js/plausible.js"></script>

  <script>

    var actx = new (AudioContext || webkitAudioContext)(),
        src = "langtliv.mp3",
        audioData, srcNode;  // global so we can access them from handlers

    var buff;

    // Load some audio (CORS need to be allowed or we won't be able to decode the data)
    fetch(src, {mode: "cors"}).then(function(resp) {return resp.arrayBuffer()}).then(decode);

    // Decode the audio file, then start the show
    function decode(buffer) {
      actx.decodeAudioData(buffer, saveBuffer);
    }

    function saveBuffer(abuffer){
        buff = abuffer;
    }

    // Sets up a new source node as needed as stopping will render current invalid
    function playLoop(abuffer) {
      if (!audioData) audioData = abuffer;  // create a reference for control buttons
      srcNode = actx.createBufferSource();  // create audio source
      srcNode.buffer = abuffer;             // use decoded buffer
      srcNode.connect(actx.destination);    // create output
      srcNode.loop = true;                  // takes care of perfect looping
      srcNode.start();                      // play...
    }

    function play() {
      playLoop(buff);

      var container = document.getElementById("container");
      container.className = "container";
    }
  </script>
</head>

<body>  
  
  <img class="malabarisk" src="m.png" onclick="play()" />

  <div class="hiddenContainer" id="container">
    <div class="gradient"></div>
    <video autoplay muted loop id="myVideo">
      <source src="malabarisk.mp4" type="video/mp4">
    </video>

    <form action="https://sistesteg.us1.list-manage.com/subscribe/post" method="POST">
    <input type="hidden" name="u" value="d9c5872166acd9affe3c95bf6">
    <input type="hidden" name="id" value="4b8173e4bb">

    <div class="pitch">
      <input class="email" type="email" autocapitalize="none" autocorrect="off" name="MERGE0" id="MERGE0" size="25" value="" placeholder="hei@post.no" /><button type="submit">MALABAR MEG!</button>
    </div>
    
    </form>

    <img class="rsp hide-on-small" src="rsp.png" />
    <img class="tmx hide-on-small" src="tmx.png" />
  </div>
</body>

</html>